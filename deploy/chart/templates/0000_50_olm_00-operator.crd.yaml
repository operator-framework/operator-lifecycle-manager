apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: operators.operators.coreos.com
  annotations:
    displayName: Operator
    description: Operator represents an operator installation.
spec:
  group: operators.coreos.com
  versions:
  - name: v2alpha1
    served: true
    storage: true
    schema:
      openAPIV3Schema:
        type: object
        properties:
          status:
            type: object
            required: ["components"]
            properties:
              components:
                type: object
                description: "components tracks the resources that compose an operator."
                required: ["labelSelector"]
                properties:
                  labelSelector:
                    # Embedded from the io.k8s.apimachinery.pkg.apis.meta.v1.LabelSelector validation schema, keep in sync with: https://github.com/kubernetes/kubernetes/blob/master/api/openapi-spec/swagger.json 
                    type: object
                    description: "labelSelector is a label query over a set of resources used to select the operator's components"
                    properties:
                      matchExpressions:
                        type: array
                        description: "matchExpressions is a list of label selector requirements. The requirements are ANDed."
                        items:
                          type: object
                          description: "A label selector requirement is a selector that contains values, a key, and an operator that relates the key and values."
                          required: ["key"]
                          required: ["operator"]
                          properties:          
                            key:            
                              description: "key is the label key that the selector applies to."
                              type: string
                              x-kubernetes-patch-merge-key: key
                              x-kubernetes-patch-strategy: merge
                            operator:          
                              type: string
                              description: "operator represents a key's relationship to a set of values. Valid operators are In, NotIn, Exists and DoesNotExist."
                            values:            
                              type: array
                              description: "values is an array of string values. If the operator is In or NotIn, the values array must be non-empty. If the operator is Exists or DoesNotExist, the values array must be empty. This array is replaced during a strategic merge patch."
                              items: 
                                type: string
                      matchLabels:
                        type: object
                        description: "matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels map is equivalent to an element of matchExpressions, whose key field is key, the operator is In, and the values array contains only value. The requirements are ANDed."
                        additionalProperties:
                          type: string
                  refs:
                    type: array
                    description: "Refs are a set of references to the operator's component resources, selected with LabelSelector."
                    items:
                      # Embeds portions of the io.k8s.apimachinery.pkg.apis.meta.v1.OwnerReference validation schema, keep in sync with: https://github.com/kubernetes/kubernetes/blob/master/api/openapi-spec/swagger.json 
                      type: object
                      properties:
                        apiVersion:
                          type: string
                          description: "API version of the referent."
                        kind:
                          type: string
                          description: "Kind of the referent. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds"
                        name:
                          type: string
                          description: "Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names"
                        namespace:
                          type: string
                          description: "Namespace of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/namespaces/"
                        resourceVersion:
                          type: string
                          description: "Specific resourceVersion to which this reference is made, if any. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#concurrency-control-and-consistency"
                        uid:
                          type: string
                          description: "UID of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#uids"
  scope: Cluster
  names:
    plural: operators
    singular: operator
    kind: Operator
    listKind: OperatorList
    shortNames:
    - op
    categories:
    - olm
    